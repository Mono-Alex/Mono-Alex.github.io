<!DOCTYPE html>
<html lang="ja">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
 <title>elf-farmの制作過程 </title>



<meta name="description" content="Describe your website">


<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">
<link rel="stylesheet" href="https://mono-alex.github.io/css/font-awesome.min.css" type='text/css' media='all'>

<link href="https://mono-alex.github.io/css/style.css" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://mono-alex.github.io/css/custom.css" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://mono-alex.github.io/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://mono-alex.github.io/img/favicon.ico" type="image/x-icon">


</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fa fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/categories/tech">Tech</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    
    <li>
      <a href="https://twitter.com/Mono_ff14_Alex?lang=ja" data-animate-hover="pulse" class="twitter" target="_blank">
        <i class="fa fa-twitter-square" title="twitter"></i>
        <span class="screen-reader-text">twitter</span>
      </a>
    </li>
    

    

    

    

    


    
    <li>
      <a href="https://github.com/Mono-Alex" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fa fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    

  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/"> Mono&#39;s Portfolio </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fa fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">アウトプットで”自分の”世界を変える</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        <li id="menu-item" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item">
          <a href="/">Home</a>
        </li>

        
        
        
        
        <li id="menu-item" class="menu-item menu-item-type-post_type menu-item-object-page menu-item">
          <a href="/about/">About</a>
        </li>
        
        
        
        <li id="menu-item" class="menu-item menu-item-type-post_type menu-item-object-page menu-item">
          <a href="/contact/">contact</a>
        </li>
        
        
      </ul>



    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
<div id="loop-container" class="loop-container">

<div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">

<div class='featured-image lazy lazy-bg-image' data-background="https://mono-alex.github.io/img/portfolio/mizuyari.gif">
</div>

<div class="entry-meta">
  <span class="date">February 11</span>	<span> / </span>

  <span class="author">
    
    <a href="https://mono-alex.github.io/%20" title="Posts by Mono-Alex" rel="author">Mono-Alex</a>
    
  </span>


    
      <span class="category">
     <span> / </span>

     <a href="/categories/Tech">Tech</a>
  </span>
   


</div>
<div class='entry-header'>
<h1 class='entry-title'> elf-farmの制作過程</h1>
</div>
<div class="entry-container">
<div class="entry-content">
  <article>
  <p>N予備校２０１８冬のwebアプリコンテスト提出用の記事になります。
コンテスト内容は以下のリンク先から
<a href="https://progedu.github.io/web-contests/webcontest2018-winter/">https://progedu.github.io/web-contests/webcontest2018-winter/</a></p>

<p>[elf-farm]URL: <a href="https://mono-alex.github.io/elf-farm/">https://mono-alex.github.io/elf-farm/</a> というlinebotの制作過程をこちらに記載していきます。
時間が取れればQittaにまとめていきたい。</p>

<p></p>

<h2 id="このアプリ-elf-farm-の目的">このアプリ(elf-farm)の目的</h2>

<p>このLINE　botのコンセプトは以下のように決めました。
キャラクター（chatbot）を通じて、植物とコミュニケーションをとる。
植物とのコミュニケーション、植物水やり装置で水をあげる。植物は喋らないので、センサ類でIOTして見える化しよう（こじつけ）</p>

<h2 id="要件定義">要件定義</h2>

<ul>
<li>上記の目的を満たすにはキャラクターが植物の翻訳者、または植物の擬人化であることとする。（アイコンや喋り方によってキャラクター付けを行う）</li>
<li>植物の状態をチャットで連携されていること（周囲の温度、湿度をチャットによって教えてくれる）←予算の都合上、要件削除</li>
<li>植物に対して何かアクションできること（水やりを行うこと）
としました。</li>
</ul>

<h2 id="機能の実装方法について">機能の実装方法について</h2>

<ul>
<li>チャットのフロントはlineのmessageAPIを使用する。</li>
<li>チャットで話す機能についてはdialogflowによる会話フローの登録を行う。</li>
<li>植物へのアクション(水やり)はobnizで作る。</li>
</ul>

<p>他にも選択肢はあるとは思いますが、使ったことないものを使う方向で選定しました。</p>

<h2 id="水やり装置にかけたお金-概算">水やり装置にかけたお金（概算）</h2>

<table>
<thead>
<tr>
<th align="left">材料</th>
<th align="right">価格</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">obniz</td>
<td align="right">6000円</td>
</tr>

<tr>
<td align="left">水中ポンプ</td>
<td align="right">1000円</td>
</tr>

<tr>
<td align="left">水中ポンプ用シリコンホース</td>
<td align="right">250円</td>
</tr>

<tr>
<td align="left">工作用プラ板</td>
<td align="right">500円</td>
</tr>

<tr>
<td align="left">ペットボトル</td>
<td align="right">いつも飲んでるから無料</td>
</tr>

<tr>
<td align="left">ブレッドボードとか配線ケーブル</td>
<td align="right">昔の電子工作の流用品</td>
</tr>

<tr>
<td align="left">合計</td>
<td align="right">約7750円くらい</td>
</tr>
</tbody>
</table>

<hr />

<h2 id="作成手順のアウトライン">作成手順のアウトライン</h2>

<ul>
<li>フロント側lineのmessageAPIの登録</li>
</ul>

<blockquote>
<p>参考記事</p>

<p>[LINEのBot開発 超入門（前編） ゼロから応答ができるまで]URL:
 <a href="https://qiita.com/nkjm/items/38808bbc97d6927837cd#_reference-7f29bf79cd4c1bd986ce">https://qiita.com/nkjm/items/38808bbc97d6927837cd#_reference-7f29bf79cd4c1bd986ce</a></p>
</blockquote>

<ul>
<li>lineとdialogflowの登録と連携</li>
</ul>

<blockquote>
<p>参考記事</p>

<p>[LINEのBot開発 超入門（後編） メッセージの内容と文脈を意識した会話を実現する]URL:
 <a href="https://qiita.com/nkjm/items/4de41988969e6f17adcb">https://qiita.com/nkjm/items/4de41988969e6f17adcb</a></p>

<p>[チャットボットをAIでもっと素敵にする！自然言語処理の仕組み]URL: <a href="https://qiita.com/okajax/items/0534c92bb9b7f9bc1413">https://qiita.com/okajax/items/0534c92bb9b7f9bc1413</a></p>
</blockquote>

<ul>
<li>obnizの水やり装置作成とハードAPIのwebhookによる連携</li>
</ul>

<blockquote>
<p>参考記事</p>

<p>[夏休みの工作におススメ！自動水やり機（Obniz＋電動灯油ポンプ）の製作]URL: <a href="https://qiita.com/keicafeblack/items/7c667d5a9dcab9f56dd3">https://qiita.com/keicafeblack/items/7c667d5a9dcab9f56dd3</a></p>

<p>[猫好きエンジニアのIoT obnizを使った「遠隔ご飯あげマシーン」]URL: <a href="https://qiita.com/kakakaori830/items/099493aae7d7b1e71765">https://qiita.com/kakakaori830/items/099493aae7d7b1e71765</a></p>
</blockquote>

<hr />

<h2 id="作ってみての所感">作ってみての所感</h2>

<h3 id="ハード側について">ハード側について</h3>

<p>水やり装置のハード側を作り込むとソフトよりも結構時間とお金がかかる印象を受けました。今回の水やり装置の規模としては最小限の卓上で行える範囲として作ってみましたが、水やり装置の規模を卓上級から、プランター級、ベランダ級とスケーリングしていくとその分ポンプのスペックや、水を貯めておくタンク部分のコストが高くなってくると思います。スケールが大きくなるとポンプ側スペックの都合上電源供給がobnizとは別系統となって、フォトカプラでスイッチの入切を行う方式をとる設計になっていくのかなと思いました。
センサ類のスケーリングについて、今回は予算の都合上、温度や湿度のモニタリングは行いませんでした。しかし、育てる植物の目的によってはモニタリングする植物の数量に比例してセンサーを増加させるのか、全体を１つとして測定するのかを考える必要がありそうです。</p>

<h3 id="ソフト側について">ソフト側について</h3>

<p>今回、コミュニケーションがテーマとなっていたため、当初はslackで何かしらのbotを作っていました。
Lineによるbot開発に踏み切ったのは、botのキャラクター化を行うにあたってLineは認知度が高く、よく知られるUIでbot感がないと感じたからです。
slackだとどうしても業務感があって、抵抗を覚えました。（業務では使ったことないんですけどね）
LineのMessageAPIに関しては簡単に登録するだけの作業なので割愛します。ソフト側のメインはdialogflowの登録になるため、簡単な挨拶に対する返答、水やり機能を実装しています。とにかくdialogflowがすごくて驚いています。当初はherokuでnodejsによるELIZAもどきでも作ってみようかと思っていましたが、想定外に平日に時間が取れなくdialogflowに頼った次第です。ソフト側では特段困ったことはなかったです。
ランディングページとしてはhugoのテンプレートを使用しています。ここはあくまでQRコードへ導く用のためのページなのでコーディング技術評価ゼロと思っています。</p>

<h3 id="ドメイン-植物のチャットによる管理-についての反省点">ドメイン（植物のチャットによる管理）についての反省点</h3>

<p>このアプリに関しては、elf-farmと友達登録していれば誰でも私の家の植物に水やりを行える機能があります。
ハード側の設計によっては水浸しになるような作りにもなるわけで、水やり機能の共同管理は難しそうだなと作りながら感じました。
わざわざLineによる命令実行するよりかは、完全にオートメーションにした方が良い機能だと思います。
水のやりすぎは根腐れの元にもなり、今の段階だと土の湿度管理もできないので闇雲に使うと植物にダメージを与えかねないので、現在は洗面器が植物の代用になっています。
こういった機能の共有化で遊びを考える場合は、何回アクセスしたかによって閾値を定めて実行条件が変わるような実装方法になるのだろうなと思いました。ツイッターで何十リツイートでイルミネーションが変わるとか、そういう企画が過去あったような気がしますね。</p>

<h3 id="キャラクターについては-別途記事を書く予定です">キャラクターについては、別途記事を書く予定です</h3>

<p>2019/2/11提出段階からアイコン画像が変わる予定です。</p>
          </article>
</div>

<div class='entry-meta-bottom'>
  

<div class="entry-categories"><p><span>Categories</span>

  <a href="/categories/tech" title="View all posts in Tech">Tech</a>
</p>
</div>



<div class="entry-tags"><p><span>Tags</span>


</p></div>	</div>
<div class="author-meta">

<div class="author">
  <img alt='Mono-Alex' src="https://www.gravatar.com/avatar/7215ee9c7d9dc229d2921a40e899ec5f?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>

	<span>
  Written by:<a href="https://mono-alex.github.io/%20" title="Posts by Mono-Alex" rel="author">Mono-Alex</a>        </span>
</div>
<div class="bio">
  
    <p>Monoは常に遊び心を忘れない</p>
  








      <a class="twitter" target="_blank"
     href="https://twitter.com/Mono_ff14_Alex?lang=ja">
    <i class="fa fa-twitter-square"
       title="twitter icon"></i>
  </a>

  



  

  

  
  <a class="github" target="_blank"
href="https://github.com/Mono-Alex">
<i class="fa fa-github"
 title="github icon"></i>
</a>
  

    </div>
</div>	</div>
</div>

<section id="comments" class="comments">
    






</section>
</div>

 



    </div>

    <footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> Mono&#39;s Portfolio </a>
    
	</h1>

			
			<p class="site-description">アウトプットで”自分の”世界を変える</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
        <li id="menu-item" class="menu-item menu-item-type-post_type menu-item-object-page menu-item"><a href="/">Home</a></li>
        
        <li id="menu-item" class="menu-item menu-item-type-post_type menu-item-object-page menu-item"><a href="/about/">About</a></li>
        
        <li id="menu-item" class="menu-item menu-item-type-post_type menu-item-object-page menu-item"><a href="/contact/">contact</a></li>
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        
        <li>
        <a href="https://twitter.com/Mono_ff14_Alex?lang=ja"  class="twitter" target="_blank">
            <i class="fa fa-twitter-square" title="twitter"></i>
            <span class="screen-reader-text">twitter</span>
        </a>
        </li>
        

        

        

        

        


        
        <li>
        <a href="https://github.com/Mono-Alex"  class="github" target="_blank">
            <i class="fa fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        
				</ul>	<div class="design-credit">
		<p>
			Copyright (C) 2017 - 2019 Mono-Alex, LTD. All Rights Reserved.<br>
			Nederburg Hugo Theme by <a target="_blank" href="https://appernetic.io">Appernetic</a>.</p><p>A port of Tracks by Compete Themes.</p>
	</div>
</footer>

  </div>
  <script src="https://mono-alex.github.io/js/jquery.min.js"></script>
<script src="https://mono-alex.github.io/js/jquerymigrate.js"></script>
<script src="https://mono-alex.github.io/js/production.min.js"></script>

</body>
</html>
